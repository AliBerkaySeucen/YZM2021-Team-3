{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nclass ApiService {\n  constructor() {\n    this.api = void 0;\n    this.api = axios.create({\n      baseURL: API_URL,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Request interceptor to add token\n    this.api.interceptors.request.use(config => {\n      const token = this.getToken();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n\n    // Response interceptor for error handling\n    this.api.interceptors.response.use(response => response, error => {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        // Token expired or invalid - only logout if not already on login page\n        const isLoginPage = window.location.pathname === '/login';\n        if (!isLoginPage) {\n          console.error('[AUTH] Token expired or invalid - logging out');\n          this.clearAuth();\n          window.location.href = '/login';\n        }\n      }\n      return Promise.reject(error);\n    });\n  }\n\n  // Token management\n  getToken() {\n    return localStorage.getItem('memolink_token');\n  }\n  setToken(token) {\n    localStorage.setItem('memolink_token', token);\n  }\n  clearAuth() {\n    localStorage.removeItem('memolink_token');\n    localStorage.removeItem('memolink_current_user');\n  }\n\n  // Auth endpoints\n  async register(name, email, password) {\n    // Backend: POST /users/create_user with JSON body\n    const response = await this.api.post('/users/create_user', {\n      first_name: name.split(' ')[0] || name,\n      surname: name.split(' ')[1] || '',\n      email,\n      password\n    });\n\n    // Get token by logging in after registration\n    const loginResponse = await this.login(email, password);\n    return loginResponse;\n  }\n  async login(email, password) {\n    // Backend: POST /users/get_access_token with form-data (OAuth2PasswordRequestForm)\n    const formData = new FormData();\n    formData.append('username', email);\n    formData.append('password', password);\n    const response = await this.api.post('/users/get_access_token', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    this.setToken(response.data.access_token);\n\n    // Get user info after login\n    const userInfo = await this.getCurrentUser();\n    localStorage.setItem('memolink_current_user', JSON.stringify(userInfo));\n    return {\n      access_token: response.data.access_token,\n      user: userInfo\n    };\n  }\n  async forgotPassword(email) {\n    const response = await this.api.post('/auth/forgot-password', {\n      email\n    });\n    return response.data;\n  }\n  async resetPassword(token, password) {\n    const response = await this.api.post('/auth/reset-password', {\n      token,\n      password\n    });\n    return response.data;\n  }\n  async resetPasswordOld(token, new_password) {\n    // Old endpoint - kept for reference\n    const response = await this.api.put('/users/reset_user_info', null, {\n      params: {\n        new_val: new_password,\n        reset_mode: 'password'\n      }\n    });\n    return response.data;\n  }\n  logout(clearDataCallback) {\n    this.clearAuth();\n    if (clearDataCallback) {\n      clearDataCallback();\n    }\n    window.location.href = '/login';\n  }\n  async getCurrentUser() {\n    // Backend: POST /users/get_user_info (requires authentication)\n    const response = await this.api.post('/users/get_user_info');\n    const user = response.data;\n\n    // Transform backend user to frontend format\n    return {\n      id: user.user_id,\n      name: user.first_name && user.surname ? `${user.first_name} ${user.surname}`.trim() : user.first_name || user.surname || 'User',\n      email: user.email,\n      createdAt: user.created_at,\n      is_premium: user.is_premium || false,\n      memory_limit: user.memory_limit || 30\n    };\n  }\n  async upgradeToPremium() {\n    // Backend: POST /users/upgrade_to_premium\n    const response = await this.api.post('/users/upgrade_to_premium');\n    return response.data;\n  }\n  async updateProfile(field, value) {\n    // Backend: PUT /users/reset_user_info\n    const response = await this.api.put('/users/reset_user_info', null, {\n      params: {\n        new_val: value,\n        reset_mode: field\n      }\n    });\n    return response.data;\n  }\n\n  // Memory endpoints (Backend uses /nodes)\n  async createMemory(memoryData) {\n    console.log('[API] createMemory called with:', {\n      title: memoryData.title,\n      hasImage: !!memoryData.image,\n      imageLength: memoryData.image ? memoryData.image.length : 0,\n      imageStart: memoryData.image ? memoryData.image.substring(0, 50) : 'no image'\n    });\n\n    // Backend: POST /nodes/create_node with JSON body including all fields\n    const response = await this.api.post('/nodes/create_node', {\n      image_id: memoryData.image,\n      description: memoryData.description,\n      title: memoryData.title || 'Untitled',\n      tags: memoryData.tags || [],\n      position: memoryData.position,\n      date: memoryData.date\n    });\n    console.log('[API] createMemory response:', {\n      node_id: response.data.node_id,\n      image_id: response.data.image_id,\n      hasImageData: !!response.data.image_data,\n      imageDataLength: response.data.image_data ? response.data.image_data.length : 0\n    });\n    console.log('[API] Full response.data:', JSON.stringify(response.data, null, 2));\n\n    // Transform backend node to frontend Memory format\n    const node = response.data;\n    return {\n      id: node.node_id || node.id,\n      title: node.title || memoryData.title || 'Untitled',\n      description: node.description || '',\n      image: node.image_data || node.image_id || memoryData.image,\n      createdAt: node.created_at || new Date().toISOString(),\n      tags: node.tags || [],\n      date: node.custom_date || memoryData.date,\n      position: node.position_x && node.position_y ? {\n        x: node.position_x,\n        y: node.position_y\n      } : memoryData.position\n    };\n  }\n  async getMemories(limit = 40, offset = 0) {\n    // Backend: GET /nodes/list_nodes with pagination\n    const response = await this.api.get('/nodes/list_nodes', {\n      params: {\n        limit,\n        offset\n      }\n    });\n    const data = response.data;\n\n    // Handle new response format with nodes array and total_count\n    const nodes = data.nodes || data;\n    const totalCount = data.total_count || nodes.length;\n    console.log(`[API] Raw nodes from backend (limit=${limit}, offset=${offset}):`, {\n      count: nodes.length,\n      totalCount\n    });\n\n    // Transform backend nodes to frontend Memory format\n    const memories = (nodes || []).map(node => {\n      const memory = {\n        id: node.node_id || node.id,\n        title: node.title || 'Memory',\n        description: node.description || '',\n        image: node.image_data || node.image_id || '',\n        createdAt: node.created_at || new Date().toISOString(),\n        tags: node.tags || [],\n        date: node.custom_date,\n        position: node.position_x && node.position_y ? {\n          x: node.position_x,\n          y: node.position_y\n        } : undefined\n      };\n      console.log(`[API] Mapped node ${memory.id}:`, {\n        hasImageData: !!node.image_data,\n        hasImageId: !!node.image_id,\n        imageLength: memory.image ? memory.image.length : 0\n      });\n      return memory;\n    });\n    return {\n      memories,\n      totalCount\n    };\n  }\n  async getMemory(id) {\n    // Backend: POST /nodes/get_node_info\n    const response = await this.api.post('/nodes/get_node_info', null, {\n      params: {\n        node_id: id\n      }\n    });\n\n    // Transform backend node to frontend Memory format\n    const node = response.data;\n    return {\n      id: node.node_id || node.id,\n      title: node.title || 'Memory',\n      description: node.description || '',\n      image: node.image_data || node.image_id || '',\n      createdAt: node.created_at || new Date().toISOString(),\n      tags: node.tags || [],\n      date: node.custom_date,\n      position: node.position_x && node.position_y ? {\n        x: node.position_x,\n        y: node.position_y\n      } : undefined\n    };\n  }\n  async updateMemory(id, updates) {\n    // Backend: PUT /nodes/update_node with Body\n    const response = await this.api.put('/nodes/update_node', {\n      node_id: id,\n      image_id: updates.image || '',\n      description: updates.description || '',\n      title: updates.title,\n      tags: updates.tags,\n      position: updates.position,\n      date: updates.date\n    });\n\n    // Transform backend node to frontend Memory format\n    const node = response.data;\n    return {\n      id: node.node_id || node.id,\n      title: node.title || updates.title || 'Memory',\n      description: node.description || '',\n      image: node.image_id || '',\n      createdAt: node.created_at || new Date().toISOString(),\n      tags: node.tags || updates.tags || [],\n      date: node.custom_date || updates.date,\n      position: node.position_x && node.position_y ? {\n        x: node.position_x,\n        y: node.position_y\n      } : updates.position\n    };\n  }\n  async deleteMemory(id) {\n    // Backend: DELETE /nodes/delete_node\n    await this.api.delete('/nodes/delete_node', {\n      params: {\n        node_id: id\n      }\n    });\n  }\n\n  // Connection endpoints (Backend uses /nodelinks)\n  async createConnection(source, target) {\n    // Backend: POST /nodelinks/create_link\n    const response = await this.api.post('/nodelinks/create_link', null, {\n      params: {\n        source_node_id: source,\n        target_node_id: target\n      }\n    });\n\n    // Transform backend nodelink to frontend Connection format\n    const link = response.data;\n    return {\n      id: link.link_id || link.id,\n      source: link.source_node_id || source,\n      target: link.target_node_id || target\n    };\n  }\n  async getConnections() {\n    // Backend: GET /nodelinks/list_links\n    const response = await this.api.get('/nodelinks/list_links');\n    const links = response.data;\n\n    // Transform backend nodelinks to frontend Connection format\n    return (links || []).map(link => ({\n      id: link.link_id || link.id,\n      source: link.source_node_id || link.source,\n      target: link.target_node_id || link.target\n    }));\n  }\n  async deleteConnection(id) {\n    // Backend: DELETE /nodelinks/delete_link with link_id\n    await this.api.delete('/nodelinks/delete_link', {\n      params: {\n        link_id: parseInt(id)\n      }\n    });\n  }\n\n  // Health check\n  async healthCheck() {\n    const response = await this.api.get('/health');\n    return response.data;\n  }\n}\nconst apiService = new ApiService();\nexport default apiService;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","ApiService","constructor","api","create","baseURL","headers","interceptors","request","use","config","token","getToken","Authorization","error","Promise","reject","response","_error$response","status","isLoginPage","window","location","pathname","console","clearAuth","href","localStorage","getItem","setToken","setItem","removeItem","register","name","email","password","post","first_name","split","surname","loginResponse","login","formData","FormData","append","data","access_token","userInfo","getCurrentUser","JSON","stringify","user","forgotPassword","resetPassword","resetPasswordOld","new_password","put","params","new_val","reset_mode","logout","clearDataCallback","id","user_id","trim","createdAt","created_at","is_premium","memory_limit","upgradeToPremium","updateProfile","field","value","createMemory","memoryData","log","title","hasImage","image","imageLength","length","imageStart","substring","image_id","description","tags","position","date","node_id","hasImageData","image_data","imageDataLength","node","Date","toISOString","custom_date","position_x","position_y","x","y","getMemories","limit","offset","get","nodes","totalCount","total_count","count","memories","map","memory","undefined","hasImageId","getMemory","updateMemory","updates","deleteMemory","delete","createConnection","source","target","source_node_id","target_node_id","link","link_id","getConnections","links","deleteConnection","parseInt","healthCheck","apiService"],"sources":["/Users/berat/YZM2021-Team-3/src/services/api.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosError } from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nclass ApiService {\n  private api: AxiosInstance;\n\n  constructor() {\n    this.api = axios.create({\n      baseURL: API_URL,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Request interceptor to add token\n    this.api.interceptors.request.use(\n      (config) => {\n        const token = this.getToken();\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      }\n    );\n\n    // Response interceptor for error handling\n    this.api.interceptors.response.use(\n      (response) => response,\n      (error: AxiosError) => {\n        if (error.response?.status === 401) {\n          // Token expired or invalid - only logout if not already on login page\n          const isLoginPage = window.location.pathname === '/login';\n          if (!isLoginPage) {\n            console.error('[AUTH] Token expired or invalid - logging out');\n            this.clearAuth();\n            window.location.href = '/login';\n          }\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  // Token management\n  private getToken(): string | null {\n    return localStorage.getItem('memolink_token');\n  }\n\n  private setToken(token: string): void {\n    localStorage.setItem('memolink_token', token);\n  }\n\n  private clearAuth(): void {\n    localStorage.removeItem('memolink_token');\n    localStorage.removeItem('memolink_current_user');\n  }\n\n  // Auth endpoints\n  async register(name: string, email: string, password: string) {\n    // Backend: POST /users/create_user with JSON body\n    const response = await this.api.post('/users/create_user', { \n      first_name: name.split(' ')[0] || name,\n      surname: name.split(' ')[1] || '',\n      email, \n      password \n    });\n    \n    // Get token by logging in after registration\n    const loginResponse = await this.login(email, password);\n    return loginResponse;\n  }\n\n  async login(email: string, password: string) {\n    // Backend: POST /users/get_access_token with form-data (OAuth2PasswordRequestForm)\n    const formData = new FormData();\n    formData.append('username', email);\n    formData.append('password', password);\n    \n    const response = await this.api.post('/users/get_access_token', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    \n    this.setToken(response.data.access_token);\n    \n    // Get user info after login\n    const userInfo = await this.getCurrentUser();\n    localStorage.setItem('memolink_current_user', JSON.stringify(userInfo));\n    \n    return { access_token: response.data.access_token, user: userInfo };\n  }\n\n  async forgotPassword(email: string) {\n    const response = await this.api.post('/auth/forgot-password', { email });\n    return response.data;\n  }\n\n  async resetPassword(token: string, password: string) {\n    const response = await this.api.post('/auth/reset-password', { \n      token, \n      password \n    });\n    return response.data;\n  }\n\n  async resetPasswordOld(token: string, new_password: string) {\n    // Old endpoint - kept for reference\n    const response = await this.api.put('/users/reset_user_info', null, {\n      params: {\n        new_val: new_password,\n        reset_mode: 'password'\n      }\n    });\n    return response.data;\n  }\n\n  logout(clearDataCallback?: () => void): void {\n    this.clearAuth();\n    if (clearDataCallback) {\n      clearDataCallback();\n    }\n    window.location.href = '/login';\n  }\n\n  async getCurrentUser() {\n    // Backend: POST /users/get_user_info (requires authentication)\n    const response = await this.api.post('/users/get_user_info');\n    const user = response.data;\n    \n    // Transform backend user to frontend format\n    return {\n      id: user.user_id,\n      name: user.first_name && user.surname ? `${user.first_name} ${user.surname}`.trim() : user.first_name || user.surname || 'User',\n      email: user.email,\n      createdAt: user.created_at,\n      is_premium: user.is_premium || false,\n      memory_limit: user.memory_limit || 30\n    };\n  }\n\n  async upgradeToPremium() {\n    // Backend: POST /users/upgrade_to_premium\n    const response = await this.api.post('/users/upgrade_to_premium');\n    return response.data;\n  }\n\n  async updateProfile(field: 'first_name' | 'surname' | 'email' | 'password', value: string) {\n    // Backend: PUT /users/reset_user_info\n    const response = await this.api.put('/users/reset_user_info', null, {\n      params: {\n        new_val: value,\n        reset_mode: field\n      }\n    });\n    return response.data;\n  }\n\n  // Memory endpoints (Backend uses /nodes)\n  async createMemory(memoryData: {\n    title: string;\n    description: string;\n    image: string;\n    tags?: string[];\n    date?: string;\n    position?: { x: number; y: number };\n  }) {\n    console.log('[API] createMemory called with:', {\n      title: memoryData.title,\n      hasImage: !!memoryData.image,\n      imageLength: memoryData.image ? memoryData.image.length : 0,\n      imageStart: memoryData.image ? memoryData.image.substring(0, 50) : 'no image'\n    });\n    \n    // Backend: POST /nodes/create_node with JSON body including all fields\n    const response = await this.api.post('/nodes/create_node', {\n      image_id: memoryData.image,\n      description: memoryData.description,\n      title: memoryData.title || 'Untitled',\n      tags: memoryData.tags || [],\n      position: memoryData.position,\n      date: memoryData.date\n    });\n    \n    console.log('[API] createMemory response:', {\n      node_id: response.data.node_id,\n      image_id: response.data.image_id,\n      hasImageData: !!response.data.image_data,\n      imageDataLength: response.data.image_data ? response.data.image_data.length : 0\n    });\n    \n    console.log('[API] Full response.data:', JSON.stringify(response.data, null, 2));\n    \n    // Transform backend node to frontend Memory format\n    const node = response.data;\n    return {\n      id: node.node_id || node.id,\n      title: node.title || memoryData.title || 'Untitled',\n      description: node.description || '',\n      image: node.image_data || node.image_id || memoryData.image,\n      createdAt: node.created_at || new Date().toISOString(),\n      tags: node.tags || [],\n      date: node.custom_date || memoryData.date,\n      position: node.position_x && node.position_y ? { x: node.position_x, y: node.position_y } : memoryData.position\n    };\n  }\n\n  async getMemories(limit: number = 40, offset: number = 0) {\n    // Backend: GET /nodes/list_nodes with pagination\n    const response = await this.api.get('/nodes/list_nodes', {\n      params: { limit, offset }\n    });\n    const data = response.data;\n    \n    // Handle new response format with nodes array and total_count\n    const nodes = data.nodes || data;\n    const totalCount = data.total_count || nodes.length;\n    \n    console.log(`[API] Raw nodes from backend (limit=${limit}, offset=${offset}):`, { count: nodes.length, totalCount });\n    \n    // Transform backend nodes to frontend Memory format\n    const memories = (nodes || []).map((node: any) => {\n      const memory = {\n        id: node.node_id || node.id,\n        title: node.title || 'Memory',\n        description: node.description || '',\n        image: node.image_data || node.image_id || '',\n        createdAt: node.created_at || new Date().toISOString(),\n        tags: node.tags || [],\n        date: node.custom_date,\n        position: node.position_x && node.position_y ? { x: node.position_x, y: node.position_y } : undefined\n      };\n      console.log(`[API] Mapped node ${memory.id}:`, {\n        hasImageData: !!node.image_data,\n        hasImageId: !!node.image_id,\n        imageLength: memory.image ? memory.image.length : 0\n      });\n      return memory;\n    });\n    \n    return { memories, totalCount };\n  }\n\n  async getMemory(id: string) {\n    // Backend: POST /nodes/get_node_info\n    const response = await this.api.post('/nodes/get_node_info', null, {\n      params: {\n        node_id: id\n      }\n    });\n    \n    // Transform backend node to frontend Memory format\n    const node = response.data;\n    return {\n      id: node.node_id || node.id,\n      title: node.title || 'Memory',\n      description: node.description || '',\n      image: node.image_data || node.image_id || '',\n      createdAt: node.created_at || new Date().toISOString(),\n      tags: node.tags || [],\n      date: node.custom_date,\n      position: node.position_x && node.position_y ? { x: node.position_x, y: node.position_y } : undefined\n    };\n  }\n\n  async updateMemory(id: string, updates: Partial<{\n    title: string;\n    description: string;\n    image: string;\n    tags: string[];\n    date: string;\n    position: { x: number; y: number };\n  }>) {\n    // Backend: PUT /nodes/update_node with Body\n    const response = await this.api.put('/nodes/update_node', {\n      node_id: id,\n      image_id: updates.image || '',\n      description: updates.description || '',\n      title: updates.title,\n      tags: updates.tags,\n      position: updates.position,\n      date: updates.date\n    });\n    \n    // Transform backend node to frontend Memory format\n    const node = response.data;\n    return {\n      id: node.node_id || node.id,\n      title: node.title || updates.title || 'Memory',\n      description: node.description || '',\n      image: node.image_id || '',\n      createdAt: node.created_at || new Date().toISOString(),\n      tags: node.tags || updates.tags || [],\n      date: node.custom_date || updates.date,\n      position: node.position_x && node.position_y ? { x: node.position_x, y: node.position_y } : updates.position\n    };\n  }\n\n  async deleteMemory(id: string) {\n    // Backend: DELETE /nodes/delete_node\n    await this.api.delete('/nodes/delete_node', {\n      params: {\n        node_id: id\n      }\n    });\n  }\n\n  // Connection endpoints (Backend uses /nodelinks)\n  async createConnection(source: string, target: string) {\n    // Backend: POST /nodelinks/create_link\n    const response = await this.api.post('/nodelinks/create_link', null, {\n      params: {\n        source_node_id: source,\n        target_node_id: target\n      }\n    });\n    \n    // Transform backend nodelink to frontend Connection format\n    const link = response.data;\n    return {\n      id: link.link_id || link.id,\n      source: link.source_node_id || source,\n      target: link.target_node_id || target\n    };\n  }\n\n  async getConnections() {\n    // Backend: GET /nodelinks/list_links\n    const response = await this.api.get('/nodelinks/list_links');\n    const links = response.data;\n    \n    // Transform backend nodelinks to frontend Connection format\n    return (links || []).map((link: any) => ({\n      id: link.link_id || link.id,\n      source: link.source_node_id || link.source,\n      target: link.target_node_id || link.target\n    }));\n  }\n\n  async deleteConnection(id: string) {\n    // Backend: DELETE /nodelinks/delete_link with link_id\n    await this.api.delete('/nodelinks/delete_link', {\n      params: {\n        link_id: parseInt(id)\n      }\n    });\n  }\n\n  // Health check\n  async healthCheck() {\n    const response = await this.api.get('/health');\n    return response.data;\n  }\n}\n\nconst apiService = new ApiService();\nexport default apiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}