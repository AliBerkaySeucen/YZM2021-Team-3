{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useMemory}from'../context/MemoryContext';import'./MemoryModal.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const MemoryModal=_ref=>{let{isOpen,onClose}=_ref;const{addMemory}=useMemory();const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[image,setImage]=useState('');const[showCamera,setShowCamera]=useState(false);const[stream,setStream]=useState(null);const[tags,setTags]=useState([]);const[newTag,setNewTag]=useState('');const[memoryDate,setMemoryDate]=useState('');const[showConfirmDialog,setShowConfirmDialog]=useState(false);const[pendingAction,setPendingAction]=useState(null);const[showImageOptions,setShowImageOptions]=useState(false);const[showUrlInput,setShowUrlInput]=useState(false);const[imageUrl,setImageUrl]=useState('');const[isLoadingImage,setIsLoadingImage]=useState(false);const fileInputRef=useRef(null);const videoRef=useRef(null);const canvasRef=useRef(null);// Cleanup camera stream on component unmount or when modal closes\nuseEffect(()=>{return()=>{if(stream){stream.getTracks().forEach(track=>track.stop());}};},[stream]);const handleImageChange=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setImage(reader.result);setShowImageOptions(false);};reader.readAsDataURL(file);}};const handleLoadFromUrl=async()=>{if(!imageUrl.trim()){alert('Lütfen geçerli bir URL girin');return;}setIsLoadingImage(true);try{// Use backend proxy to fetch image (bypasses CORS)\nconst token=localStorage.getItem('memolink_token');if(!token){alert('Oturum süresi dolmuş. Lütfen tekrar giriş yapın.');setIsLoadingImage(false);return;}const response=await fetch('http://localhost:8000/images/fetch_from_url',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({url:imageUrl})});if(!response.ok){const error=await response.json();alert(error.detail||'Resim yüklenemedi');setIsLoadingImage(false);return;}const data=await response.json();if(data.success&&data.image){setImage(data.image);setImageUrl('');setShowUrlInput(false);setShowImageOptions(false);}else{alert('Resim yüklenemedi');}}catch(error){console.error('URL\\'den resim yükleme hatası:',error);alert('Resim yüklenirken bir hata oluştu');}finally{setIsLoadingImage(false);}};const startCamera=async()=>{try{const mediaStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'user',width:{ideal:1280},height:{ideal:720}}});setStream(mediaStream);setShowCamera(true);// Wait for next tick to ensure video element is rendered\nsetTimeout(()=>{if(videoRef.current){videoRef.current.srcObject=mediaStream;videoRef.current.play().catch(err=>{console.error('Video play error:',err);});}},100);}catch(error){console.error('Kamera erişim hatası:',error);alert('Kamera erişimi reddedildi. Lütfen tarayıcı ayarlarınızdan kamera iznini kontrol edin.');}};const stopCamera=()=>{if(stream){stream.getTracks().forEach(track=>track.stop());setStream(null);}setShowCamera(false);};const capturePhoto=()=>{if(videoRef.current&&canvasRef.current){const video=videoRef.current;const canvas=canvasRef.current;// Set canvas dimensions to match video\nconst width=video.videoWidth||video.clientWidth;const height=video.videoHeight||video.clientHeight;canvas.width=width;canvas.height=height;const ctx=canvas.getContext('2d');if(ctx){// Flip the canvas horizontally to mirror the captured image\nctx.translate(width,0);ctx.scale(-1,1);// Draw the video frame to canvas\nctx.drawImage(video,0,0,width,height);// Convert to base64 image\nconst imageData=canvas.toDataURL('image/jpeg',0.9);setImage(imageData);stopCamera();}}};const handleAddTag=()=>{if(newTag.trim()&&!tags.includes(newTag.trim())){setTags([...tags,newTag.trim()]);setNewTag('');}};const handleRemoveTag=tagToRemove=>{setTags(tags.filter(tag=>tag!==tagToRemove));};const handleSubmit=()=>{if(!title.trim()){alert('Please enter a title');return;}if(!description.trim()){alert('Please enter a description');return;}if(!image){alert('Please add an image');return;}addMemory({title:title.trim(),description:description.trim(),image,tags,date:memoryDate||undefined,position:{x:Math.random()*400-200,y:Math.random()*300-150}});// Reset form\nsetTitle('');setDescription('');setImage('');setTags([]);setNewTag('');setMemoryDate('');onClose();};const hasUnsavedChanges=()=>{return title.trim()!==''||description.trim()!==''||image!==''||tags.length>0||memoryDate!=='';};const confirmDiscard=()=>{stopCamera();setTitle('');setDescription('');setImage('');setTags([]);setNewTag('');setMemoryDate('');setShowConfirmDialog(false);setPendingAction(null);onClose();};const cancelDiscard=()=>{setShowConfirmDialog(false);setPendingAction(null);};const handleCancel=()=>{if(hasUnsavedChanges()){setPendingAction('cancel');setShowConfirmDialog(true);}else{stopCamera();setTitle('');setDescription('');setImage('');setTags([]);setNewTag('');setMemoryDate('');onClose();}};const handleOverlayClick=()=>{if(hasUnsavedChanges()){setPendingAction('close');setShowConfirmDialog(true);}else{onClose();}};if(!isOpen)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-overlay\",onClick:handleOverlayClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-left\",children:!showCamera?/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload-area\",children:[image?/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"Preview\",className:\"image-preview\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"upload-icon\",children:\"+\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-text\",children:\"Foto\\u011Fraf Ekle\"})]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",onChange:handleImageChange,style:{display:'none'}}),!image&&!showUrlInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"upload-options\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-source-container\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"upload-option-btn main-option\",onClick:()=>setShowImageOptions(!showImageOptions),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"3\",y:\"3\",width:\"18\",height:\"18\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"8.5\",cy:\"8.5\",r:\"1.5\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"21 15 16 10 5 21\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Di\\u011Fer Se\\xE7enekler\"})]}),showImageOptions&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-options-popup\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"popup-option-btn\",onClick:()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();setShowImageOptions(false);},children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"17 8 12 3 7 8\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"3\",x2:\"12\",y2:\"15\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Dosya Ekle\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"popup-option-btn\",onClick:()=>{setShowUrlInput(true);setShowImageOptions(false);},children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"URL'den Y\\xFCkle\"})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"upload-option-btn camera-btn\",onClick:startCamera,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"13\",r:\"4\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Foto\\u011Fraf \\xC7ek\"})]})]}),!image&&showUrlInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"url-input-container\",children:[isLoadingImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-overlay\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-text\",children:\"Resim y\\xFCkleniyor...\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"url-input\",placeholder:\"Resim URL'sini girin...\",value:imageUrl,onChange:e=>setImageUrl(e.target.value),onKeyPress:e=>e.key==='Enter'&&!isLoadingImage&&handleLoadFromUrl(),disabled:isLoadingImage}),/*#__PURE__*/_jsxs(\"div\",{className:\"url-input-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"url-btn cancel\",onClick:()=>{setShowUrlInput(false);setImageUrl('');},disabled:isLoadingImage,children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"url-btn load\",onClick:handleLoadFromUrl,disabled:isLoadingImage,children:isLoadingImage?'Yükleniyor...':'Yükle'})]})]}),image&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"change-photo-btn\",onClick:()=>setImage(''),children:\"Foto\\u011Fraf\\u0131 De\\u011Fi\\u015Ftir\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"camera-container\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,className:\"camera-video\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"camera-controls\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"camera-control-btn cancel\",onClick:stopCamera,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0130ptal\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"camera-control-btn capture\",onClick:capturePhoto,children:/*#__PURE__*/_jsx(\"svg\",{width:\"32\",height:\"32\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"})})}),/*#__PURE__*/_jsx(\"div\",{style:{width:'80px'}})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-right\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"memory-input\",placeholder:\"Enter your memory's title\",value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{className:\"memory-textarea\",placeholder:\"Enter your memory's details\",value:description,onChange:e=>setDescription(e.target.value),rows:6}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-modal\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label-modal\",children:\"Tags (Optional)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tags-list\",children:tags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"modal-tag\",children:[tag,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveTag(tag),className:\"remove-modal-tag-btn\",children:\"\\xD7\"})]},tag))}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-modal-tag-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTag,onChange:e=>setNewTag(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),handleAddTag()),placeholder:\"Add a tag...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddTag,className:\"add-modal-tag-btn\",children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-modal\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label-modal\",children:\"Memory Date (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"memory-date-input\",value:memoryDate,onChange:e=>setMemoryDate(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",onClick:handleCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:handleSubmit,children:\"Add Memory\"})]})]})]})}),showConfirmDialog&&/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-overlay\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"confirm-dialog-title\",children:\"Unsaved Changes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"confirm-dialog-message\",children:\"You have unsaved changes. Are you sure you want to discard them?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"confirm-dialog-btn cancel\",onClick:cancelDiscard,children:\"Keep Editing\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-dialog-btn discard\",onClick:confirmDiscard,children:\"Discard Changes\"})]})]})})]});};export default MemoryModal;","map":{"version":3,"names":["React","useState","useRef","useEffect","useMemory","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MemoryModal","_ref","isOpen","onClose","addMemory","title","setTitle","description","setDescription","image","setImage","showCamera","setShowCamera","stream","setStream","tags","setTags","newTag","setNewTag","memoryDate","setMemoryDate","showConfirmDialog","setShowConfirmDialog","pendingAction","setPendingAction","showImageOptions","setShowImageOptions","showUrlInput","setShowUrlInput","imageUrl","setImageUrl","isLoadingImage","setIsLoadingImage","fileInputRef","videoRef","canvasRef","getTracks","forEach","track","stop","handleImageChange","e","_e$target$files","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleLoadFromUrl","trim","alert","token","localStorage","getItem","response","fetch","method","headers","concat","body","JSON","stringify","url","ok","error","json","detail","data","success","console","startCamera","mediaStream","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","setTimeout","current","srcObject","play","catch","err","stopCamera","capturePhoto","canvas","videoWidth","clientWidth","videoHeight","clientHeight","ctx","getContext","translate","scale","drawImage","imageData","toDataURL","handleAddTag","includes","handleRemoveTag","tagToRemove","filter","tag","handleSubmit","date","undefined","position","x","Math","random","y","hasUnsavedChanges","length","confirmDiscard","cancelDiscard","handleCancel","handleOverlayClick","className","onClick","children","stopPropagation","src","alt","ref","type","accept","onChange","style","display","viewBox","fill","stroke","strokeWidth","rx","ry","cx","cy","r","points","_fileInputRef$current","click","d","x1","y1","x2","y2","placeholder","value","onKeyPress","key","disabled","autoPlay","playsInline","rows","map","preventDefault"],"sources":["/Users/berat/YZM2021-Team-3/src/components/MemoryModal.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useMemory } from '../context/MemoryContext';\nimport './MemoryModal.css';\n\ninterface MemoryModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst MemoryModal: React.FC<MemoryModalProps> = ({ isOpen, onClose }) => {\n  const { addMemory } = useMemory();\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [image, setImage] = useState('');\n  const [showCamera, setShowCamera] = useState(false);\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  const [tags, setTags] = useState<string[]>([]);\n  const [newTag, setNewTag] = useState('');\n  const [memoryDate, setMemoryDate] = useState('');\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const [pendingAction, setPendingAction] = useState<'close' | 'cancel' | null>(null);\n  const [showImageOptions, setShowImageOptions] = useState(false);\n  const [showUrlInput, setShowUrlInput] = useState(false);\n  const [imageUrl, setImageUrl] = useState('');\n  const [isLoadingImage, setIsLoadingImage] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // Cleanup camera stream on component unmount or when modal closes\n  useEffect(() => {\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [stream]);\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImage(reader.result as string);\n        setShowImageOptions(false);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleLoadFromUrl = async () => {\n    if (!imageUrl.trim()) {\n      alert('Lütfen geçerli bir URL girin');\n      return;\n    }\n\n    setIsLoadingImage(true);\n    try {\n      // Use backend proxy to fetch image (bypasses CORS)\n      const token = localStorage.getItem('memolink_token');\n      if (!token) {\n        alert('Oturum süresi dolmuş. Lütfen tekrar giriş yapın.');\n        setIsLoadingImage(false);\n        return;\n      }\n\n      const response = await fetch('http://localhost:8000/images/fetch_from_url', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ url: imageUrl })\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        alert(error.detail || 'Resim yüklenemedi');\n        setIsLoadingImage(false);\n        return;\n      }\n\n      const data = await response.json();\n      \n      if (data.success && data.image) {\n        setImage(data.image);\n        setImageUrl('');\n        setShowUrlInput(false);\n        setShowImageOptions(false);\n      } else {\n        alert('Resim yüklenemedi');\n      }\n    } catch (error) {\n      console.error('URL\\'den resim yükleme hatası:', error);\n      alert('Resim yüklenirken bir hata oluştu');\n    } finally {\n      setIsLoadingImage(false);\n    }\n  };\n\n  const startCamera = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: { \n          facingMode: 'user',\n          width: { ideal: 1280 },\n          height: { ideal: 720 }\n        }\n      });\n      setStream(mediaStream);\n      setShowCamera(true);\n      \n      // Wait for next tick to ensure video element is rendered\n      setTimeout(() => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = mediaStream;\n          videoRef.current.play().catch(err => {\n            console.error('Video play error:', err);\n          });\n        }\n      }, 100);\n    } catch (error) {\n      console.error('Kamera erişim hatası:', error);\n      alert('Kamera erişimi reddedildi. Lütfen tarayıcı ayarlarınızdan kamera iznini kontrol edin.');\n    }\n  };\n\n  const stopCamera = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n    setShowCamera(false);\n  };\n\n  const capturePhoto = () => {\n    if (videoRef.current && canvasRef.current) {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      \n      // Set canvas dimensions to match video\n      const width = video.videoWidth || video.clientWidth;\n      const height = video.videoHeight || video.clientHeight;\n      \n      canvas.width = width;\n      canvas.height = height;\n      \n      const ctx = canvas.getContext('2d');\n      if (ctx) {\n        // Flip the canvas horizontally to mirror the captured image\n        ctx.translate(width, 0);\n        ctx.scale(-1, 1);\n        \n        // Draw the video frame to canvas\n        ctx.drawImage(video, 0, 0, width, height);\n        \n        // Convert to base64 image\n        const imageData = canvas.toDataURL('image/jpeg', 0.9);\n        setImage(imageData);\n        stopCamera();\n      }\n    }\n  };\n\n  const handleAddTag = () => {\n    if (newTag.trim() && !tags.includes(newTag.trim())) {\n      setTags([...tags, newTag.trim()]);\n      setNewTag('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n  };\n\n  const handleSubmit = () => {\n    if (!title.trim()) {\n      alert('Please enter a title');\n      return;\n    }\n    if (!description.trim()) {\n      alert('Please enter a description');\n      return;\n    }\n    if (!image) {\n      alert('Please add an image');\n      return;\n    }\n\n    addMemory({\n      title: title.trim(),\n      description: description.trim(),\n      image,\n      tags,\n      date: memoryDate || undefined,\n      position: {\n        x: Math.random() * 400 - 200,\n        y: Math.random() * 300 - 150,\n      },\n    });\n\n    // Reset form\n    setTitle('');\n    setDescription('');\n    setImage('');\n    setTags([]);\n    setNewTag('');\n    setMemoryDate('');\n    onClose();\n  };\n\n  const hasUnsavedChanges = () => {\n    return title.trim() !== '' || description.trim() !== '' || image !== '' || tags.length > 0 || memoryDate !== '';\n  };\n\n  const confirmDiscard = () => {\n    stopCamera();\n    setTitle('');\n    setDescription('');\n    setImage('');\n    setTags([]);\n    setNewTag('');\n    setMemoryDate('');\n    setShowConfirmDialog(false);\n    setPendingAction(null);\n    onClose();\n  };\n\n  const cancelDiscard = () => {\n    setShowConfirmDialog(false);\n    setPendingAction(null);\n  };\n\n  const handleCancel = () => {\n    if (hasUnsavedChanges()) {\n      setPendingAction('cancel');\n      setShowConfirmDialog(true);\n    } else {\n      stopCamera();\n      setTitle('');\n      setDescription('');\n      setImage('');\n      setTags([]);\n      setNewTag('');\n      setMemoryDate('');\n      onClose();\n    }\n  };\n\n  const handleOverlayClick = () => {\n    if (hasUnsavedChanges()) {\n      setPendingAction('close');\n      setShowConfirmDialog(true);\n    } else {\n      onClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"modal-overlay\" onClick={handleOverlayClick}>\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\n        <div className=\"modal-layout\">\n          <div className=\"modal-left\">\n            {!showCamera ? (\n              <div className=\"image-upload-area\">\n                {image ? (\n                  <img src={image} alt=\"Preview\" className=\"image-preview\" />\n                ) : (\n                  <>\n                    <div className=\"upload-icon\">+</div>\n                    <div className=\"upload-text\">Fotoğraf Ekle</div>\n                  </>\n                )}\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleImageChange}\n                  style={{ display: 'none' }}\n                />\n                \n                {!image && !showUrlInput && (\n                  <div className=\"upload-options\">\n                    <div className=\"image-source-container\">\n                      <button\n                        type=\"button\"\n                        className=\"upload-option-btn main-option\"\n                        onClick={() => setShowImageOptions(!showImageOptions)}\n                      >\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                          <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle>\n                          <polyline points=\"21 15 16 10 5 21\"></polyline>\n                        </svg>\n                        <span>Diğer Seçenekler</span>\n                      </button>\n                      \n                      {showImageOptions && (\n                        <div className=\"image-options-popup\">\n                          <button\n                            type=\"button\"\n                            className=\"popup-option-btn\"\n                            onClick={() => {\n                              fileInputRef.current?.click();\n                              setShowImageOptions(false);\n                            }}\n                          >\n                            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                              <polyline points=\"17 8 12 3 7 8\"></polyline>\n                              <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\n                            </svg>\n                            <span>Dosya Ekle</span>\n                          </button>\n                          <button\n                            type=\"button\"\n                            className=\"popup-option-btn\"\n                            onClick={() => {\n                              setShowUrlInput(true);\n                              setShowImageOptions(false);\n                            }}\n                          >\n                            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                              <path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path>\n                              <path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path>\n                            </svg>\n                            <span>URL'den Yükle</span>\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <button\n                      type=\"button\"\n                      className=\"upload-option-btn camera-btn\"\n                      onClick={startCamera}\n                    >\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <path d=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"></path>\n                        <circle cx=\"12\" cy=\"13\" r=\"4\"></circle>\n                      </svg>\n                      <span>Fotoğraf Çek</span>\n                    </button>\n                  </div>\n                )}\n\n                {!image && showUrlInput && (\n                  <div className=\"url-input-container\">\n                    {isLoadingImage && (\n                      <div className=\"loading-overlay\">\n                        <div className=\"loading-spinner\"></div>\n                        <div className=\"loading-text\">Resim yükleniyor...</div>\n                      </div>\n                    )}\n                    <input\n                      type=\"text\"\n                      className=\"url-input\"\n                      placeholder=\"Resim URL'sini girin...\"\n                      value={imageUrl}\n                      onChange={(e) => setImageUrl(e.target.value)}\n                      onKeyPress={(e) => e.key === 'Enter' && !isLoadingImage && handleLoadFromUrl()}\n                      disabled={isLoadingImage}\n                    />\n                    <div className=\"url-input-actions\">\n                      <button\n                        type=\"button\"\n                        className=\"url-btn cancel\"\n                        onClick={() => {\n                          setShowUrlInput(false);\n                          setImageUrl('');\n                        }}\n                        disabled={isLoadingImage}\n                      >\n                        İptal\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"url-btn load\"\n                        onClick={handleLoadFromUrl}\n                        disabled={isLoadingImage}\n                      >\n                        {isLoadingImage ? 'Yükleniyor...' : 'Yükle'}\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {image && (\n                  <button\n                    type=\"button\"\n                    className=\"change-photo-btn\"\n                    onClick={() => setImage('')}\n                  >\n                    Fotoğrafı Değiştir\n                  </button>\n                )}\n              </div>\n            ) : (\n              <div className=\"camera-container\">\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  playsInline\n                  className=\"camera-video\"\n                />\n                <canvas ref={canvasRef} style={{ display: 'none' }} />\n                <div className=\"camera-controls\">\n                  <button\n                    type=\"button\"\n                    className=\"camera-control-btn cancel\"\n                    onClick={stopCamera}\n                  >\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n                    </svg>\n                    <span>İptal</span>\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"camera-control-btn capture\"\n                    onClick={capturePhoto}\n                  >\n                    <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                    </svg>\n                  </button>\n                  <div style={{ width: '80px' }}></div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"modal-right\">\n            <input\n              type=\"text\"\n              className=\"memory-input\"\n              placeholder=\"Enter your memory's title\"\n              value={title}\n              onChange={e => setTitle(e.target.value)}\n            />\n\n            <textarea\n              className=\"memory-textarea\"\n              placeholder=\"Enter your memory's details\"\n              value={description}\n              onChange={e => setDescription(e.target.value)}\n              rows={6}\n            />\n\n            <div className=\"form-row-horizontal\">\n              <div className=\"form-group-modal\">\n                <label className=\"form-label-modal\">Tags (Optional)</label>\n                <div className=\"tags-list\">\n                  {tags.map(tag => (\n                    <span key={tag} className=\"modal-tag\">\n                      {tag}\n                      <button type=\"button\" onClick={() => handleRemoveTag(tag)} className=\"remove-modal-tag-btn\">×</button>\n                    </span>\n                  ))}\n                </div>\n                <div className=\"add-modal-tag-input\">\n                  <input\n                    type=\"text\"\n                    value={newTag}\n                    onChange={e => setNewTag(e.target.value)}\n                    onKeyPress={e => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                    placeholder=\"Add a tag...\"\n                  />\n                  <button type=\"button\" onClick={handleAddTag} className=\"add-modal-tag-btn\">Add</button>\n                </div>\n              </div>\n\n              <div className=\"form-group-modal\">\n                <label className=\"form-label-modal\">Memory Date (Optional)</label>\n                <input\n                  type=\"date\"\n                  className=\"memory-date-input\"\n                  value={memoryDate}\n                  onChange={e => setMemoryDate(e.target.value)}\n                />\n              </div>\n            </div>\n\n            <div className=\"modal-actions\">\n              <button className=\"btn-cancel\" onClick={handleCancel}>\n                Cancel\n              </button>\n              <button className=\"btn-add\" onClick={handleSubmit}>\n                Add Memory\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {showConfirmDialog && (\n        <div className=\"confirm-dialog-overlay\" onClick={(e) => e.stopPropagation()}>\n          <div className=\"confirm-dialog\">\n            <h3 className=\"confirm-dialog-title\">Unsaved Changes</h3>\n            <p className=\"confirm-dialog-message\">\n              You have unsaved changes. Are you sure you want to discard them?\n            </p>\n            <div className=\"confirm-dialog-actions\">\n              <button className=\"confirm-dialog-btn cancel\" onClick={cancelDiscard}>\n                Keep Editing\n              </button>\n              <button className=\"confirm-dialog-btn discard\" onClick={confirmDiscard}>\n                Discard Changes\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MemoryModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}