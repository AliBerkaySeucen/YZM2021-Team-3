{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useMemory}from'../context/MemoryContext';import'./Album.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Album=()=>{const{memories,connections,updateMemory,deleteMemory,loadMoreMemories,hasMore,loading}=useMemory();const[selectedMemory,setSelectedMemory]=useState(null);const[searchQuery,setSearchQuery]=useState('');const[selectedTag,setSelectedTag]=useState('');const[isEditMode,setIsEditMode]=useState(false);const[isExpandedView,setIsExpandedView]=useState(false);const[editTitle,setEditTitle]=useState('');const[editDescription,setEditDescription]=useState('');const[editTags,setEditTags]=useState([]);const[newTag,setNewTag]=useState('');const[showDeleteConfirm,setShowDeleteConfirm]=useState(false);const[sortOption,setSortOption]=useState('date-newest');const[currentPage,setCurrentPage]=useState(1);const memoriesPerPage=12;const scrollContainerRef=useRef(null);// Infinite scroll handler\nuseEffect(()=>{const handleScroll=()=>{const container=scrollContainerRef.current;if(!container||loading||!hasMore)return;const{scrollTop,scrollHeight,clientHeight}=container;// Load more when user scrolls to 80% of the content\nif(scrollTop+clientHeight>=scrollHeight*0.8){loadMoreMemories();}};const container=scrollContainerRef.current;if(container){container.addEventListener('scroll',handleScroll);return()=>container.removeEventListener('scroll',handleScroll);}},[loading,hasMore,loadMoreMemories]);const openMemory=id=>{const memory=memories.find(m=>m.id===id);if(memory){setSelectedMemory(id);setEditTitle(memory.title);setEditDescription(memory.description);setEditTags(memory.tags||[]);setIsEditMode(false);}};const closeMemory=()=>{setSelectedMemory(null);setIsEditMode(false);setIsExpandedView(false);setShowDeleteConfirm(false);};const handleNextMemory=()=>{const currentIndex=filteredMemories.findIndex(m=>m.id===selectedMemory);if(currentIndex<filteredMemories.length-1){openMemory(filteredMemories[currentIndex+1].id);}};const handlePrevMemory=()=>{const currentIndex=filteredMemories.findIndex(m=>m.id===selectedMemory);if(currentIndex>0){openMemory(filteredMemories[currentIndex-1].id);}};const handleEdit=()=>{setIsEditMode(true);};const handleSaveEdit=()=>{if(selectedMemory){updateMemory(selectedMemory,{title:editTitle,description:editDescription,tags:editTags});setIsEditMode(false);}};const handleCancelEdit=()=>{const memory=memories.find(m=>m.id===selectedMemory);if(memory){setEditTitle(memory.title);setEditDescription(memory.description);setEditTags(memory.tags||[]);}setIsEditMode(false);};const handleAddTag=()=>{if(newTag.trim()&&!editTags.includes(newTag.trim())){setEditTags([...editTags,newTag.trim()]);setNewTag('');}};const handleRemoveTag=tagToRemove=>{setEditTags(editTags.filter(tag=>tag!==tagToRemove));};const handleDelete=()=>{setShowDeleteConfirm(true);};const confirmDelete=()=>{if(selectedMemory){deleteMemory(selectedMemory);closeMemory();}};const cancelDelete=()=>{setShowDeleteConfirm(false);};// Get all unique tags\nconst allTags=Array.from(new Set(memories.flatMap(m=>m.tags||[])));// Get connected memories for the selected memory\nconst getConnectedMemories=memoryId=>{const outgoingConnections=connections.filter(c=>c.source===memoryId).map(c=>memories.find(m=>m.id===c.target)).filter(m=>m!==undefined);const incomingConnections=connections.filter(c=>c.target===memoryId).map(c=>memories.find(m=>m.id===c.source)).filter(m=>m!==undefined);return{outgoing:outgoingConnections,incoming:incomingConnections};};// Sort and filter memories\nconst sortedAndFilteredMemories=React.useMemo(()=>{// First, filter memories\nlet result=memories.filter(memory=>{const matchesSearch=memory.title.toLowerCase().includes(searchQuery.toLowerCase())||memory.description.toLowerCase().includes(searchQuery.toLowerCase())||(memory.tags||[]).some(tag=>tag.toLowerCase().includes(searchQuery.toLowerCase()));const matchesTag=!selectedTag||(memory.tags||[]).includes(selectedTag);return matchesSearch&&matchesTag;});// Then, sort memories\nresult.sort((a,b)=>{switch(sortOption){case'date-newest':return new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime();case'date-oldest':return new Date(a.createdAt).getTime()-new Date(b.createdAt).getTime();case'title-az':return a.title.localeCompare(b.title);case'title-za':return b.title.localeCompare(a.title);default:return 0;}});return result;},[memories,searchQuery,selectedTag,sortOption]);// Reset to page 1 when filters or sort changes\nReact.useEffect(()=>{setCurrentPage(1);},[searchQuery,selectedTag,sortOption]);// Pagination calculations\nconst totalPages=Math.ceil(sortedAndFilteredMemories.length/memoriesPerPage);const startIndex=(currentPage-1)*memoriesPerPage;const endIndex=startIndex+memoriesPerPage;const currentMemories=sortedAndFilteredMemories.slice(startIndex,endIndex);// Keep filteredMemories for backward compatibility with popup navigation\nconst filteredMemories=sortedAndFilteredMemories;const selectedMemoryData=memories.find(m=>m.id===selectedMemory);return/*#__PURE__*/_jsxs(\"div\",{className:\"album\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Your Album\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"album-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-sort-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"search-icon\",width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"11\",cy:\"11\",r:\"8\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m21 21-4.35-4.35\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search memories by title, description, or tags...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sort-container\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"sort-icon\",width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 6h18M7 12h10M11 18h2\"})}),/*#__PURE__*/_jsxs(\"select\",{className:\"sort-select\",value:sortOption,onChange:e=>setSortOption(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"date-newest\",children:\"Date (Newest First)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"date-oldest\",children:\"Date (Oldest First)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"title-az\",children:\"Title (A-Z)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"title-za\",children:\"Title (Z-A)\"})]})]})]}),allTags.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"tag-filter\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tag-filter-btn \".concat(!selectedTag?'active':''),onClick:()=>setSelectedTag(''),children:\"All\"}),allTags.map(tag=>/*#__PURE__*/_jsx(\"button\",{className:\"tag-filter-btn \".concat(selectedTag===tag?'active':''),onClick:()=>setSelectedTag(tag),children:tag},tag))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"album-grid\",ref:scrollContainerRef,style:{maxHeight:'70vh',overflowY:'auto'},children:[currentMemories.length>0?currentMemories.map((memory,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"memory-card\",onClick:()=>openMemory(memory.id),children:[/*#__PURE__*/_jsx(\"img\",{src:memory.image,alt:memory.title,className:\"memory-image\",loading:\"lazy\",decoding:\"async\",style:{contentVisibility:'auto'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"memory-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"memory-title\",children:memory.title}),/*#__PURE__*/_jsx(\"p\",{className:\"memory-description\",children:memory.description||''}),memory.tags&&memory.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"memory-tags\",children:memory.tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"memory-tag\",children:tag},tag))})]})]},memory.id)):/*#__PURE__*/_jsx(\"div\",{className:\"no-memories\",children:/*#__PURE__*/_jsx(\"p\",{children:searchQuery||selectedTag?'No memories found matching your search.':'No memories yet. Start adding some!'})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-more\",style:{textAlign:'center',padding:'20px',color:'#888'},children:\"Loading more memories...\"}),!hasMore&&memories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-more-data\",style:{textAlign:'center',padding:'20px',color:'#888'},children:\"All memories loaded\"})]}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>setCurrentPage(1),disabled:currentPage===1,title:\"First page\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"11 17 6 12 11 7\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"18 17 13 12 18 7\"})]})}),/*#__PURE__*/_jsxs(\"button\",{className:\"pagination-btn\",onClick:()=>setCurrentPage(prev=>Math.max(1,prev-1)),disabled:currentPage===1,children:[/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"15 18 9 12 15 6\"})}),\"Previous\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-numbers\",children:[currentPage>3&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"page-number\",onClick:()=>setCurrentPage(1),children:\"1\"}),currentPage>4&&/*#__PURE__*/_jsx(\"span\",{className:\"page-ellipsis\",children:\"...\"})]}),Array.from({length:totalPages},(_,i)=>i+1).filter(page=>page===currentPage||page===currentPage-1||page===currentPage+1||page===currentPage-2||page===currentPage+2).map(page=>/*#__PURE__*/_jsx(\"button\",{className:\"page-number \".concat(page===currentPage?'active':''),onClick:()=>setCurrentPage(page),children:page},page)),currentPage<totalPages-2&&/*#__PURE__*/_jsxs(_Fragment,{children:[currentPage<totalPages-3&&/*#__PURE__*/_jsx(\"span\",{className:\"page-ellipsis\",children:\"...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"page-number\",onClick:()=>setCurrentPage(totalPages),children:totalPages})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"pagination-count\",children:[\"(\",sortedAndFilteredMemories.length,\" \",sortedAndFilteredMemories.length===1?'memory':'memories',\")\"]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"pagination-btn\",onClick:()=>setCurrentPage(prev=>Math.min(totalPages,prev+1)),disabled:currentPage===totalPages,children:[\"Next\",/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"9 18 15 12 9 6\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>setCurrentPage(totalPages),disabled:currentPage===totalPages,title:\"Last page\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"13 17 18 12 13 7\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"6 17 11 12 6 7\"})]})})]}),selectedMemoryData&&/*#__PURE__*/_jsx(\"div\",{className:\"memory-popup-overlay\",onClick:closeMemory,children:/*#__PURE__*/_jsxs(\"div\",{className:\"memory-popup-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup-close-btn\",onClick:closeMemory,children:/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})}),filteredMemories.findIndex(m=>m.id===selectedMemory)>0&&/*#__PURE__*/_jsx(\"button\",{className:\"popup-nav-btn prev-btn\",onClick:handlePrevMemory,children:/*#__PURE__*/_jsx(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"15 18 9 12 15 6\"})})}),filteredMemories.findIndex(m=>m.id===selectedMemory)<filteredMemories.length-1&&/*#__PURE__*/_jsx(\"button\",{className:\"popup-nav-btn next-btn\",onClick:handleNextMemory,children:/*#__PURE__*/_jsx(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"9 18 15 12 9 6\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedMemoryData.image,alt:selectedMemoryData.title,className:\"popup-image\",loading:\"eager\",decoding:\"async\"}),/*#__PURE__*/_jsx(\"button\",{className:\"expand-image-btn\",onClick:()=>setIsExpandedView(true),title:\"View full size\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"15 3 21 3 21 9\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"9 21 3 21 3 15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"21\",y1:\"3\",x2:\"14\",y2:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"3\",y1:\"21\",x2:\"10\",y2:\"14\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-info\",children:!isEditMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"popup-title\",children:selectedMemoryData.title}),/*#__PURE__*/_jsx(\"p\",{className:\"popup-description\",children:selectedMemoryData.description}),selectedMemoryData.tags&&selectedMemoryData.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-tags\",children:selectedMemoryData.tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"popup-tag\",children:tag},tag))}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-date\",children:selectedMemoryData.date?/*#__PURE__*/_jsxs(_Fragment,{children:[\"Memory Date: \",new Date(selectedMemoryData.date).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"Added: \",new Date(selectedMemoryData.createdAt).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'})]})}),(()=>{const connectedMemories=getConnectedMemories(selectedMemoryData.id);const hasConnections=connectedMemories.outgoing.length>0||connectedMemories.incoming.length>0;return hasConnections&&/*#__PURE__*/_jsxs(\"div\",{className:\"popup-connections\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"connections-title\",children:\"Connections\"}),connectedMemories.outgoing.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"connection-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"connection-group-header\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"connection-icon\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"5\",y1:\"12\",x2:\"19\",y2:\"12\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"12 5 19 12 12 19\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"connection-label\",children:[\"Outgoing Links (\",connectedMemories.outgoing.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"connection-list\",children:connectedMemories.outgoing.map(memory=>/*#__PURE__*/_jsxs(\"div\",{className:\"connection-item\",onClick:e=>{e.stopPropagation();openMemory(memory.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:memory.image,alt:memory.title,className:\"connection-thumbnail\"}),/*#__PURE__*/_jsx(\"span\",{className:\"connection-name\",children:memory.title})]},memory.id))})]}),connectedMemories.incoming.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"connection-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"connection-group-header\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"connection-icon\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"19\",y1:\"12\",x2:\"5\",y2:\"12\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"12 19 5 12 12 5\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"connection-label\",children:[\"Incoming Links (\",connectedMemories.incoming.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"connection-list\",children:connectedMemories.incoming.map(memory=>/*#__PURE__*/_jsxs(\"div\",{className:\"connection-item\",onClick:e=>{e.stopPropagation();openMemory(memory.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:memory.image,alt:memory.title,className:\"connection-thumbnail\"}),/*#__PURE__*/_jsx(\"span\",{className:\"connection-name\",children:memory.title})]},memory.id))})]})]});})(),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"edit-btn\",onClick:handleEdit,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"delete-btn\",onClick:handleDelete,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"3 6 5 6 21 6\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"})]}),\"Delete\"]})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"edit-input\",value:editTitle,onChange:e=>setEditTitle(e.target.value),placeholder:\"Title\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"edit-textarea\",value:editDescription,onChange:e=>setEditDescription(e.target.value),placeholder:\"Description\",rows:6}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-tags-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"edit-label\",children:\"Tags:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"edit-tags-list\",children:editTags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"edit-tag\",children:[tag,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveTag(tag),className:\"remove-tag-btn\",children:\"\\xD7\"})]},tag))}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-tag-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTag,onChange:e=>setNewTag(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleAddTag(),placeholder:\"Add a tag...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTag,className:\"add-tag-btn\",children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:handleSaveEdit,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:handleCancelEdit,children:\"Cancel\"})]})]})})]})}),showDeleteConfirm&&selectedMemoryData&&/*#__PURE__*/_jsx(\"div\",{className:\"delete-confirm-overlay\",onClick:cancelDelete,children:/*#__PURE__*/_jsxs(\"div\",{className:\"delete-confirm-dialog\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"delete-confirm-icon\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"9\",x2:\"12\",y2:\"13\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"17\",x2:\"12.01\",y2:\"17\"})]})}),/*#__PURE__*/_jsx(\"h2\",{className:\"delete-confirm-title\",children:\"Delete Memory?\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"delete-confirm-message\",children:[\"Are you sure you want to delete \\\"\",/*#__PURE__*/_jsx(\"strong\",{children:selectedMemoryData.title}),\"\\\"?\",(()=>{const connectedMemories=getConnectedMemories(selectedMemoryData.id);const totalConnections=connectedMemories.outgoing.length+connectedMemories.incoming.length;return totalConnections>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"delete-warning\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u26A0\\uFE0F This memory has \",totalConnections,\" connection\",totalConnections>1?'s':'',\" that will also be removed.\"]});})()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delete-confirm-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-confirm-cancel\",onClick:cancelDelete,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-confirm-delete\",onClick:confirmDelete,children:\"Delete\"})]})]})}),isExpandedView&&selectedMemoryData&&/*#__PURE__*/_jsxs(\"div\",{className:\"expanded-image-overlay\",onClick:()=>setIsExpandedView(false),children:[/*#__PURE__*/_jsx(\"button\",{className:\"expanded-close-btn\",onClick:()=>setIsExpandedView(false),children:/*#__PURE__*/_jsxs(\"svg\",{width:\"32\",height:\"32\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})}),/*#__PURE__*/_jsx(\"img\",{src:selectedMemoryData.image,alt:selectedMemoryData.title,className:\"expanded-image\",onClick:e=>e.stopPropagation()})]})]});};export default Album;","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemory","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Album","memories","connections","updateMemory","deleteMemory","loadMoreMemories","hasMore","loading","selectedMemory","setSelectedMemory","searchQuery","setSearchQuery","selectedTag","setSelectedTag","isEditMode","setIsEditMode","isExpandedView","setIsExpandedView","editTitle","setEditTitle","editDescription","setEditDescription","editTags","setEditTags","newTag","setNewTag","showDeleteConfirm","setShowDeleteConfirm","sortOption","setSortOption","currentPage","setCurrentPage","memoriesPerPage","scrollContainerRef","handleScroll","container","current","scrollTop","scrollHeight","clientHeight","addEventListener","removeEventListener","openMemory","id","memory","find","m","title","description","tags","closeMemory","handleNextMemory","currentIndex","filteredMemories","findIndex","length","handlePrevMemory","handleEdit","handleSaveEdit","handleCancelEdit","handleAddTag","trim","includes","handleRemoveTag","tagToRemove","filter","tag","handleDelete","confirmDelete","cancelDelete","allTags","Array","from","Set","flatMap","getConnectedMemories","memoryId","outgoingConnections","c","source","map","target","undefined","incomingConnections","outgoing","incoming","sortedAndFilteredMemories","useMemo","result","matchesSearch","toLowerCase","some","matchesTag","sort","a","b","Date","createdAt","getTime","localeCompare","totalPages","Math","ceil","startIndex","endIndex","currentMemories","slice","selectedMemoryData","className","children","width","height","viewBox","fill","stroke","strokeWidth","cx","cy","r","d","type","placeholder","value","onChange","e","concat","onClick","ref","style","maxHeight","overflowY","index","src","image","alt","decoding","contentVisibility","textAlign","padding","color","disabled","points","prev","max","_","i","page","min","stopPropagation","x1","y1","x2","y2","date","toLocaleDateString","year","month","day","connectedMemories","hasConnections","rows","onKeyPress","key","totalConnections"],"sources":["/Users/berat/YZM2021-Team-3/src/pages/Album.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useMemory } from '../context/MemoryContext';\nimport './Album.css';\n\nconst Album: React.FC = () => {\n  const { memories, connections, updateMemory, deleteMemory, loadMoreMemories, hasMore, loading } = useMemory();\n  const [selectedMemory, setSelectedMemory] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTag, setSelectedTag] = useState<string>('');\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [isExpandedView, setIsExpandedView] = useState(false);\n  const [editTitle, setEditTitle] = useState('');\n  const [editDescription, setEditDescription] = useState('');\n  const [editTags, setEditTags] = useState<string[]>([]);\n  const [newTag, setNewTag] = useState('');\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [sortOption, setSortOption] = useState<string>('date-newest');\n  const [currentPage, setCurrentPage] = useState(1);\n  const memoriesPerPage = 12;\n  \n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  // Infinite scroll handler\n  useEffect(() => {\n    const handleScroll = () => {\n      const container = scrollContainerRef.current;\n      if (!container || loading || !hasMore) return;\n      \n      const { scrollTop, scrollHeight, clientHeight } = container;\n      // Load more when user scrolls to 80% of the content\n      if (scrollTop + clientHeight >= scrollHeight * 0.8) {\n        loadMoreMemories();\n      }\n    };\n\n    const container = scrollContainerRef.current;\n    if (container) {\n      container.addEventListener('scroll', handleScroll);\n      return () => container.removeEventListener('scroll', handleScroll);\n    }\n  }, [loading, hasMore, loadMoreMemories]);\n\n  const openMemory = (id: string) => {\n    const memory = memories.find(m => m.id === id);\n    if (memory) {\n      setSelectedMemory(id);\n      setEditTitle(memory.title);\n      setEditDescription(memory.description);\n      setEditTags(memory.tags || []);\n      setIsEditMode(false);\n    }\n  };\n\n  const closeMemory = () => {\n    setSelectedMemory(null);\n    setIsEditMode(false);\n    setIsExpandedView(false);\n    setShowDeleteConfirm(false);\n  };\n\n  const handleNextMemory = () => {\n    const currentIndex = filteredMemories.findIndex(m => m.id === selectedMemory);\n    if (currentIndex < filteredMemories.length - 1) {\n      openMemory(filteredMemories[currentIndex + 1].id);\n    }\n  };\n\n  const handlePrevMemory = () => {\n    const currentIndex = filteredMemories.findIndex(m => m.id === selectedMemory);\n    if (currentIndex > 0) {\n      openMemory(filteredMemories[currentIndex - 1].id);\n    }\n  };\n\n  const handleEdit = () => {\n    setIsEditMode(true);\n  };\n\n  const handleSaveEdit = () => {\n    if (selectedMemory) {\n      updateMemory(selectedMemory, {\n        title: editTitle,\n        description: editDescription,\n        tags: editTags,\n      });\n      setIsEditMode(false);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    const memory = memories.find(m => m.id === selectedMemory);\n    if (memory) {\n      setEditTitle(memory.title);\n      setEditDescription(memory.description);\n      setEditTags(memory.tags || []);\n    }\n    setIsEditMode(false);\n  };\n\n  const handleAddTag = () => {\n    if (newTag.trim() && !editTags.includes(newTag.trim())) {\n      setEditTags([...editTags, newTag.trim()]);\n      setNewTag('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setEditTags(editTags.filter(tag => tag !== tagToRemove));\n  };\n\n  const handleDelete = () => {\n    setShowDeleteConfirm(true);\n  };\n\n  const confirmDelete = () => {\n    if (selectedMemory) {\n      deleteMemory(selectedMemory);\n      closeMemory();\n    }\n  };\n\n  const cancelDelete = () => {\n    setShowDeleteConfirm(false);\n  };\n\n  // Get all unique tags\n  const allTags = Array.from(new Set(memories.flatMap(m => m.tags || [])));\n\n  // Get connected memories for the selected memory\n  const getConnectedMemories = (memoryId: string) => {\n    const outgoingConnections = connections\n      .filter(c => c.source === memoryId)\n      .map(c => memories.find(m => m.id === c.target))\n      .filter(m => m !== undefined);\n    \n    const incomingConnections = connections\n      .filter(c => c.target === memoryId)\n      .map(c => memories.find(m => m.id === c.source))\n      .filter(m => m !== undefined);\n    \n    return { outgoing: outgoingConnections, incoming: incomingConnections };\n  };\n\n  // Sort and filter memories\n  const sortedAndFilteredMemories = React.useMemo(() => {\n    // First, filter memories\n    let result = memories.filter(memory => {\n      const matchesSearch = \n        memory.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        memory.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (memory.tags || []).some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n      \n      const matchesTag = !selectedTag || (memory.tags || []).includes(selectedTag);\n      \n      return matchesSearch && matchesTag;\n    });\n\n    // Then, sort memories\n    result.sort((a, b) => {\n      switch (sortOption) {\n        case 'date-newest':\n          return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n        case 'date-oldest':\n          return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n        case 'title-az':\n          return a.title.localeCompare(b.title);\n        case 'title-za':\n          return b.title.localeCompare(a.title);\n        default:\n          return 0;\n      }\n    });\n\n    return result;\n  }, [memories, searchQuery, selectedTag, sortOption]);\n\n  // Reset to page 1 when filters or sort changes\n  React.useEffect(() => {\n    setCurrentPage(1);\n  }, [searchQuery, selectedTag, sortOption]);\n\n  // Pagination calculations\n  const totalPages = Math.ceil(sortedAndFilteredMemories.length / memoriesPerPage);\n  const startIndex = (currentPage - 1) * memoriesPerPage;\n  const endIndex = startIndex + memoriesPerPage;\n  const currentMemories = sortedAndFilteredMemories.slice(startIndex, endIndex);\n  \n  // Keep filteredMemories for backward compatibility with popup navigation\n  const filteredMemories = sortedAndFilteredMemories;\n\n  const selectedMemoryData = memories.find(m => m.id === selectedMemory);\n\n  return (\n    <div className=\"album\">\n      <h1 className=\"page-title\">Your Album</h1>\n\n      {/* Search and Filter Bar */}\n      <div className=\"album-controls\">\n        <div className=\"search-sort-row\">\n          <div className=\"search-container\">\n            <svg className=\"search-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n              <path d=\"m21 21-4.35-4.35\"></path>\n            </svg>\n            <input\n              type=\"text\"\n              className=\"search-input\"\n              placeholder=\"Search memories by title, description, or tags...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <div className=\"sort-container\">\n            <svg className=\"sort-icon\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M3 6h18M7 12h10M11 18h2\"></path>\n            </svg>\n            <select \n              className=\"sort-select\"\n              value={sortOption}\n              onChange={(e) => setSortOption(e.target.value)}\n            >\n              <option value=\"date-newest\">Date (Newest First)</option>\n              <option value=\"date-oldest\">Date (Oldest First)</option>\n              <option value=\"title-az\">Title (A-Z)</option>\n              <option value=\"title-za\">Title (Z-A)</option>\n            </select>\n          </div>\n        </div>\n\n        {allTags.length > 0 && (\n          <div className=\"tag-filter\">\n            <button\n              className={`tag-filter-btn ${!selectedTag ? 'active' : ''}`}\n              onClick={() => setSelectedTag('')}\n            >\n              All\n            </button>\n            {allTags.map(tag => (\n              <button\n                key={tag}\n                className={`tag-filter-btn ${selectedTag === tag ? 'active' : ''}`}\n                onClick={() => setSelectedTag(tag)}\n              >\n                {tag}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"album-grid\" ref={scrollContainerRef} style={{ maxHeight: '70vh', overflowY: 'auto' }}>\n        {currentMemories.length > 0 ? (\n          currentMemories.map((memory, index) => (\n            <div key={memory.id} className=\"memory-card\" onClick={() => openMemory(memory.id)}>\n              <img \n                src={memory.image} \n                alt={memory.title} \n                className=\"memory-image\"\n                loading=\"lazy\"\n                decoding=\"async\"\n                style={{ contentVisibility: 'auto' }}\n              />\n              <div className=\"memory-info\">\n                <h3 className=\"memory-title\">{memory.title}</h3>\n                <p className=\"memory-description\">\n                  {memory.description || ''}\n                </p>\n                {memory.tags && memory.tags.length > 0 && (\n                  <div className=\"memory-tags\">\n                    {memory.tags.map(tag => (\n                      <span key={tag} className=\"memory-tag\">{tag}</span>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"no-memories\">\n            <p>{searchQuery || selectedTag ? 'No memories found matching your search.' : 'No memories yet. Start adding some!'}</p>\n          </div>\n        )}\n        \n        {loading && (\n          <div className=\"loading-more\" style={{ textAlign: 'center', padding: '20px', color: '#888' }}>\n            Loading more memories...\n          </div>\n        )}\n        \n        {!hasMore && memories.length > 0 && (\n          <div className=\"no-more-data\" style={{ textAlign: 'center', padding: '20px', color: '#888' }}>\n            All memories loaded\n          </div>\n        )}\n      </div>\n\n      {/* Pagination Controls */}\n      {totalPages > 1 && (\n        <div className=\"pagination-controls\">\n          <button \n            className=\"pagination-btn\"\n            onClick={() => setCurrentPage(1)}\n            disabled={currentPage === 1}\n            title=\"First page\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"11 17 6 12 11 7\"></polyline>\n              <polyline points=\"18 17 13 12 18 7\"></polyline>\n            </svg>\n          </button>\n          \n          <button \n            className=\"pagination-btn\"\n            onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n            disabled={currentPage === 1}\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"15 18 9 12 15 6\"></polyline>\n            </svg>\n            Previous\n          </button>\n          \n          <div className=\"pagination-info\">\n            <div className=\"page-numbers\">\n              {currentPage > 3 && (\n                <>\n                  <button className=\"page-number\" onClick={() => setCurrentPage(1)}>1</button>\n                  {currentPage > 4 && <span className=\"page-ellipsis\">...</span>}\n                </>\n              )}\n              \n              {Array.from({ length: totalPages }, (_, i) => i + 1)\n                .filter(page => \n                  page === currentPage || \n                  page === currentPage - 1 || \n                  page === currentPage + 1 ||\n                  page === currentPage - 2 ||\n                  page === currentPage + 2\n                )\n                .map(page => (\n                  <button\n                    key={page}\n                    className={`page-number ${page === currentPage ? 'active' : ''}`}\n                    onClick={() => setCurrentPage(page)}\n                  >\n                    {page}\n                  </button>\n                ))}\n              \n              {currentPage < totalPages - 2 && (\n                <>\n                  {currentPage < totalPages - 3 && <span className=\"page-ellipsis\">...</span>}\n                  <button className=\"page-number\" onClick={() => setCurrentPage(totalPages)}>{totalPages}</button>\n                </>\n              )}\n            </div>\n            <span className=\"pagination-count\">({sortedAndFilteredMemories.length} {sortedAndFilteredMemories.length === 1 ? 'memory' : 'memories'})</span>\n          </div>\n          \n          <button \n            className=\"pagination-btn\"\n            onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n            disabled={currentPage === totalPages}\n          >\n            Next\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"9 18 15 12 9 6\"></polyline>\n            </svg>\n          </button>\n          \n          <button \n            className=\"pagination-btn\"\n            onClick={() => setCurrentPage(totalPages)}\n            disabled={currentPage === totalPages}\n            title=\"Last page\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"13 17 18 12 13 7\"></polyline>\n              <polyline points=\"6 17 11 12 6 7\"></polyline>\n            </svg>\n          </button>\n        </div>\n      )}\n\n      {selectedMemoryData && (\n        <div className=\"memory-popup-overlay\" onClick={closeMemory}>\n          <div className=\"memory-popup-content\" onClick={e => e.stopPropagation()}>\n            <button className=\"popup-close-btn\" onClick={closeMemory}>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n              </svg>\n            </button>\n\n            {filteredMemories.findIndex(m => m.id === selectedMemory) > 0 && (\n              <button className=\"popup-nav-btn prev-btn\" onClick={handlePrevMemory}>\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <polyline points=\"15 18 9 12 15 6\"></polyline>\n                </svg>\n              </button>\n            )}\n\n            {filteredMemories.findIndex(m => m.id === selectedMemory) < filteredMemories.length - 1 && (\n              <button className=\"popup-nav-btn next-btn\" onClick={handleNextMemory}>\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <polyline points=\"9 18 15 12 9 6\"></polyline>\n                </svg>\n              </button>\n            )}\n\n            <div className=\"popup-image-container\">\n              <img \n                src={selectedMemoryData.image} \n                alt={selectedMemoryData.title} \n                className=\"popup-image\"\n                loading=\"eager\"\n                decoding=\"async\"\n              />\n              <button \n                className=\"expand-image-btn\" \n                onClick={() => setIsExpandedView(true)}\n                title=\"View full size\"\n              >\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <polyline points=\"15 3 21 3 21 9\"></polyline>\n                  <polyline points=\"9 21 3 21 3 15\"></polyline>\n                  <line x1=\"21\" y1=\"3\" x2=\"14\" y2=\"10\"></line>\n                  <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\"></line>\n                </svg>\n              </button>\n            </div>\n            <div className=\"popup-info\">\n              {!isEditMode ? (\n                <>\n                  <h2 className=\"popup-title\">{selectedMemoryData.title}</h2>\n                  <p className=\"popup-description\">{selectedMemoryData.description}</p>\n                  \n                  {selectedMemoryData.tags && selectedMemoryData.tags.length > 0 && (\n                    <div className=\"popup-tags\">\n                      {selectedMemoryData.tags.map(tag => (\n                        <span key={tag} className=\"popup-tag\">{tag}</span>\n                      ))}\n                    </div>\n                  )}\n\n                  <div className=\"popup-date\">\n                    {selectedMemoryData.date ? (\n                      <>Memory Date: {new Date(selectedMemoryData.date).toLocaleDateString('en-US', {\n                        year: 'numeric',\n                        month: 'long',\n                        day: 'numeric'\n                      })}</>\n                    ) : (\n                      <>Added: {new Date(selectedMemoryData.createdAt).toLocaleDateString('en-US', {\n                        year: 'numeric',\n                        month: 'long',\n                        day: 'numeric'\n                      })}</>\n                    )}\n                  </div>\n\n                  {/* Connections Section */}\n                  {(() => {\n                    const connectedMemories = getConnectedMemories(selectedMemoryData.id);\n                    const hasConnections = connectedMemories.outgoing.length > 0 || connectedMemories.incoming.length > 0;\n                    \n                    return hasConnections && (\n                      <div className=\"popup-connections\">\n                        <h3 className=\"connections-title\">Connections</h3>\n                        \n                        {connectedMemories.outgoing.length > 0 && (\n                          <div className=\"connection-group\">\n                            <div className=\"connection-group-header\">\n                              <svg className=\"connection-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                                <polyline points=\"12 5 19 12 12 19\"></polyline>\n                              </svg>\n                              <span className=\"connection-label\">Outgoing Links ({connectedMemories.outgoing.length})</span>\n                            </div>\n                            <div className=\"connection-list\">\n                              {connectedMemories.outgoing.map(memory => (\n                                <div key={memory!.id} className=\"connection-item\" onClick={(e) => {\n                                  e.stopPropagation();\n                                  openMemory(memory!.id);\n                                }}>\n                                  <img src={memory!.image} alt={memory!.title} className=\"connection-thumbnail\" />\n                                  <span className=\"connection-name\">{memory!.title}</span>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                        \n                        {connectedMemories.incoming.length > 0 && (\n                          <div className=\"connection-group\">\n                            <div className=\"connection-group-header\">\n                              <svg className=\"connection-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line>\n                                <polyline points=\"12 19 5 12 12 5\"></polyline>\n                              </svg>\n                              <span className=\"connection-label\">Incoming Links ({connectedMemories.incoming.length})</span>\n                            </div>\n                            <div className=\"connection-list\">\n                              {connectedMemories.incoming.map(memory => (\n                                <div key={memory!.id} className=\"connection-item\" onClick={(e) => {\n                                  e.stopPropagation();\n                                  openMemory(memory!.id);\n                                }}>\n                                  <img src={memory!.image} alt={memory!.title} className=\"connection-thumbnail\" />\n                                  <span className=\"connection-name\">{memory!.title}</span>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })()}\n\n                  <div className=\"popup-actions\">\n                    <button className=\"edit-btn\" onClick={handleEdit}>\n                      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\n                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\n                      </svg>\n                      Edit\n                    </button>\n                    <button className=\"delete-btn\" onClick={handleDelete}>\n                      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polyline points=\"3 6 5 6 21 6\"></polyline>\n                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\n                      </svg>\n                      Delete\n                    </button>\n                  </div>\n                </>\n              ) : (\n                <>\n                  <input\n                    type=\"text\"\n                    className=\"edit-input\"\n                    value={editTitle}\n                    onChange={(e) => setEditTitle(e.target.value)}\n                    placeholder=\"Title\"\n                  />\n                  <textarea\n                    className=\"edit-textarea\"\n                    value={editDescription}\n                    onChange={(e) => setEditDescription(e.target.value)}\n                    placeholder=\"Description\"\n                    rows={6}\n                  />\n                  \n                  <div className=\"edit-tags-section\">\n                    <label className=\"edit-label\">Tags:</label>\n                    <div className=\"edit-tags-list\">\n                      {editTags.map(tag => (\n                        <span key={tag} className=\"edit-tag\">\n                          {tag}\n                          <button onClick={() => handleRemoveTag(tag)} className=\"remove-tag-btn\">Ã—</button>\n                        </span>\n                      ))}\n                    </div>\n                    <div className=\"add-tag-input\">\n                      <input\n                        type=\"text\"\n                        value={newTag}\n                        onChange={(e) => setNewTag(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && handleAddTag()}\n                        placeholder=\"Add a tag...\"\n                      />\n                      <button onClick={handleAddTag} className=\"add-tag-btn\">Add</button>\n                    </div>\n                  </div>\n\n                  <div className=\"popup-actions\">\n                    <button className=\"save-btn\" onClick={handleSaveEdit}>Save</button>\n                    <button className=\"cancel-btn\" onClick={handleCancelEdit}>Cancel</button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Confirmation Dialog */}\n      {showDeleteConfirm && selectedMemoryData && (\n        <div className=\"delete-confirm-overlay\" onClick={cancelDelete}>\n          <div className=\"delete-confirm-dialog\" onClick={e => e.stopPropagation()}>\n            <div className=\"delete-confirm-icon\">\n              <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n                <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n                <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n              </svg>\n            </div>\n            <h2 className=\"delete-confirm-title\">Delete Memory?</h2>\n            <p className=\"delete-confirm-message\">\n              Are you sure you want to delete \"<strong>{selectedMemoryData.title}</strong>\"?\n              {(() => {\n                const connectedMemories = getConnectedMemories(selectedMemoryData.id);\n                const totalConnections = connectedMemories.outgoing.length + connectedMemories.incoming.length;\n                return totalConnections > 0 && (\n                  <span className=\"delete-warning\">\n                    <br /><br />\n                    âš ï¸ This memory has {totalConnections} connection{totalConnections > 1 ? 's' : ''} that will also be removed.\n                  </span>\n                );\n              })()}\n            </p>\n            <div className=\"delete-confirm-actions\">\n              <button className=\"delete-confirm-cancel\" onClick={cancelDelete}>Cancel</button>\n              <button className=\"delete-confirm-delete\" onClick={confirmDelete}>Delete</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {isExpandedView && selectedMemoryData && (\n        <div className=\"expanded-image-overlay\" onClick={() => setIsExpandedView(false)}>\n          <button className=\"expanded-close-btn\" onClick={() => setIsExpandedView(false)}>\n            <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n          <img \n            src={selectedMemoryData.image} \n            alt={selectedMemoryData.title} \n            className=\"expanded-image\"\n            onClick={(e) => e.stopPropagation()}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Album;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}