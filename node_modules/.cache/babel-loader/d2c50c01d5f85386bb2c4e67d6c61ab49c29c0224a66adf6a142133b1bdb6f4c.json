{"ast":null,"code":"import React,{useState,useEffect}from'react';import PremiumModal from'./PremiumModal';import apiService from'../services/api';import{toast}from'react-toastify';import'./Header.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Header=()=>{// Initialize from localStorage to prevent flashing\nconst cachedUser=JSON.parse(localStorage.getItem('memolink_current_user')||'{}');const[isPremium,setIsPremium]=useState(cachedUser.is_premium||false);const[showPremiumModal,setShowPremiumModal]=useState(false);useEffect(()=>{const checkPremiumStatus=async()=>{try{const user=await apiService.getCurrentUser();setIsPremium(user.is_premium||false);}catch(error){console.error('Error checking premium status:',error);}};checkPremiumStatus();},[]);const handleUpgrade=async()=>{try{await apiService.upgradeToPremium();setIsPremium(true);setShowPremiumModal(false);toast.success('Welcome to Premium! Enjoy unlimited memories!');// Refresh user data\nconst updatedUser=await apiService.getCurrentUser();localStorage.setItem('memolink_current_user',JSON.stringify(updatedUser));}catch(error){toast.error('Failed to upgrade to premium');console.error('Upgrade error:',error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"MemoLink\"}),!isPremium&&/*#__PURE__*/_jsxs(\"button\",{className:\"go-premium-btn\",onClick:()=>setShowPremiumModal(true),children:[/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\"})}),\"Go Premium\"]})]}),/*#__PURE__*/_jsx(PremiumModal,{isOpen:showPremiumModal,onClose:()=>setShowPremiumModal(false),onUpgrade:handleUpgrade})]});};export default Header;","map":{"version":3,"names":["React","useState","useEffect","PremiumModal","apiService","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Header","cachedUser","JSON","parse","localStorage","getItem","isPremium","setIsPremium","is_premium","showPremiumModal","setShowPremiumModal","checkPremiumStatus","user","getCurrentUser","error","console","handleUpgrade","upgradeToPremium","success","updatedUser","setItem","stringify","children","className","onClick","width","height","viewBox","fill","stroke","strokeWidth","d","isOpen","onClose","onUpgrade"],"sources":["/Users/berat/YZM2021-Team-3/src/components/Header.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PremiumModal from './PremiumModal';\nimport apiService from '../services/api';\nimport { toast } from 'react-toastify';\nimport './Header.css';\n\nconst Header: React.FC = () => {\n  // Initialize from localStorage to prevent flashing\n  const cachedUser = JSON.parse(localStorage.getItem('memolink_current_user') || '{}');\n  const [isPremium, setIsPremium] = useState(cachedUser.is_premium || false);\n  const [showPremiumModal, setShowPremiumModal] = useState(false);\n\n  useEffect(() => {\n    const checkPremiumStatus = async () => {\n      try {\n        const user = await apiService.getCurrentUser();\n        setIsPremium(user.is_premium || false);\n      } catch (error) {\n        console.error('Error checking premium status:', error);\n      }\n    };\n    checkPremiumStatus();\n  }, []);\n\n  const handleUpgrade = async () => {\n    try {\n      await apiService.upgradeToPremium();\n      setIsPremium(true);\n      setShowPremiumModal(false);\n      toast.success('Welcome to Premium! Enjoy unlimited memories!');\n      \n      // Refresh user data\n      const updatedUser = await apiService.getCurrentUser();\n      localStorage.setItem('memolink_current_user', JSON.stringify(updatedUser));\n    } catch (error) {\n      toast.error('Failed to upgrade to premium');\n      console.error('Upgrade error:', error);\n    }\n  };\n\n  return (\n    <>\n      <header className=\"app-header\">\n        <h1>MemoLink</h1>\n        {!isPremium && (\n          <button className=\"go-premium-btn\" onClick={() => setShowPremiumModal(true)}>\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\" />\n            </svg>\n            Go Premium\n          </button>\n        )}\n      </header>\n      <PremiumModal \n        isOpen={showPremiumModal} \n        onClose={() => setShowPremiumModal(false)}\n        onUpgrade={handleUpgrade}\n      />\n    </>\n  );\n};\n\nexport default Header;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}